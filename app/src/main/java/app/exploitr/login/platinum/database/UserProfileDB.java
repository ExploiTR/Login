package app.exploitr.login.platinum.database;

import android.content.Context;
import android.content.SharedPreferences;
import android.preference.PreferenceManager;

import javax.annotation.Nullable;

public class UserProfileDB {
	private final SharedPreferences preferences;
	private static final String USER = "ussr";
	private static final String PURL = "purl";
	private static final String USRD = "usrd";

	public UserProfileDB(Context context) {
		preferences = PreferenceManager.getDefaultSharedPreferences(context);
	}

	@Nullable
	public String getUsername() {
		return username.isEmpty() ? preferences.getString(USER,
				null) : username;
	}

	public UserProfileDB setUsername(String username) {
		this.username = username;
		check();
		return this;
	}

	private void check() {
		if (!username.isEmpty() && !profileUrl.isEmpty() && !joiningDate.isEmpty()) {
			preferences.edit().putString(USER, username).apply();
			preferences.edit().putString(PURL, profileUrl).apply();
			preferences.edit().putString(USRD, joiningDate).apply();
		}
	}

	@Nullable
	public String getProfileUrl() {
		return profileUrl.isEmpty() ? preferences.getString(PURL, null) : profileUrl;
	}

	public UserProfileDB setProfileUrl(String profileUrl) {
		this.profileUrl = profileUrl;
		check();
		return this;
	}

	@Nullable
	public String getJoiningDate() {
		return joiningDate.isEmpty() ? preferences.getString(USRD, null) : joiningDate;
	}

	public UserProfileDB setJoiningDate(String joiningDate) {
		this.joiningDate = joiningDate;
		check();
		return this;
	}

	private String username = "";
	private String profileUrl = "";
	private String joiningDate = "";
}
